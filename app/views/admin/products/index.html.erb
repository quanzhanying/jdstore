<h1>商品列表</h1>

<div class="pull-right">
  <%= link_to("添加商品", new_admin_product_path, :class => "btn btn-default" ) %>
</div>

<br><br>

<table class="table table-bordered">

  <thead>
    <tr>
      <th>#</th>
      <th>商品名称</th>
      <th>描述</th>
      <th>图片</th>
      <th>库存</th>
      <th>价格</th>
      <th>选项</th>
      <th>创建日期</th>
    </tr>
  </thead>
  <% @products.each do |product| %>
  <tbody>
    <tr>
      <td>
        <%= product.id%>
      </td>
      <td>
        <%= render_product_status(product) %>
        <%= link_to(product.title, admin_product_path(product)) %>
      </td>
      <td>
        <%= product.description %>
      </td>
      <td>
        <% if product.image.present? %>
          <%= image_tag(product.image.thumb.url, class:"thumbnail") %>
        <% else %>
          <%= image_tag("http://placehold.it/200x200", class:"thumbnail")%>
        <% end %>
      </td>
      <td>
        <%= product.quantity %>
      </td>
      <td>
        <%= product.price %>
      </td>
      <td>
        <%= link_to("Edit", edit_admin_product_path(product)) %> |
        <%= link_to("Destroy", admin_product_path(product), :method => :delete, :data => { :confirm => "Are you sure?" }) %> |
        <% if product.is_hidden %>
          <%= link_to("上架", publish_admin_product_path(product), :method => :post, :class => "btn btn-xs btn-default") %>
        <% else %>
          <%= link_to("下架", hide_admin_product_path(product), :method => :post, :class => "btn btn-xs btn-default") %>
        <% end %>
      </td>
      <td>
        <%= product.created_at %>
      </td>
    </tr>
  </tbody>
  <% end %>
</table>
