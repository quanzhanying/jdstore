<h2> Product List </h2>
<div class="pull-right" style="padding-bottom: 20px;">
  <%= link_to("新增产品", new_admin_product_path, class: "btn btn-primary btn-sm") %>
</div>
<table class="table table-bordered">
  <thead>
    <tr>
      <th>#</th>
      <th width="220"> Product Pic</th>
      <th>Name</th>
      <th>Price</th>
      <th width="100"> Options</th>
  </thead>
  <tbody>
    <% @products.each do |product| %>
    <tr>
      <td>
        <%= product.id %>
      </td>
      <td>
        <%= link_to product_path(product) do %>
          <% if product.image.present? %>
            <%= image_tag(product.image.thumb.url, class: "thumbnail")%>
          <% else %>
            <%= image_tag("http://placehold.it/200x200&text=No Pic",class: "thumbnail")%>
          <% end %>
        <% end %>
      </td>
      <td>
        <%= render_product_status(product) %>

        <%= link_to(product.title, admin_product_path(product)) %>  <!-- 在helpers里重构了-->
      </td>
      <td>
        <%= product.price %>
      </td>
      <td>
         <%= link_to("Edit", edit_admin_product_path(product),:class => "btn btn-xs btn-default") %> |
         <%= link_to("delete", admin_product_path(product),method: :delete, data: { confirm: "确定删除商品吗?" },:class => "btn btn-xs btn-default") %> |
         <%= link_to "向上", move_up_admin_product_path(product), method: :patch ,:class => "btn btn-xs btn-default"%>|
         <%= link_to "向下", move_down_admin_product_path(product), method: :patch ,:class => "btn btn-xs btn-default"%>|

        <% if product.is_hidden %>
         <%= link_to("上架", publish_admin_product_path(product) , :method => :post,  :class => "btn btn-xs btn-default") %>
        <% else %>
         <%= link_to("下架", hide_admin_product_path(product), :method => :post, :class => "btn btn-xs btn-default") %>
        <% end %>

      </td>
    </tr>
    <% end %>
  </tbody>
</table>
