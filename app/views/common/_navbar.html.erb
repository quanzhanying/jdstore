<div class='navbar navbar-inverse'>
  <div class='container'>
    <!-- <div class="navbar-header"> -->

    <a href='/' class='navbar-brand'>
      <!-- 爱绘本 -->
      <%= image_tag("JDStore.png") %>
    </a>
    <ul class="nav navbar-nav ">
      <li class="active">
        <%= link_to("Products", products_path) %>
      </li>
    </ul>
    <!-- <button type='button' class="navbar-toggle" data-toggle='collapse' data-target='.navbar-collapse'>
        <span class='sr-only'>Toggle navigation</span>
        <span class='icon-bar'></span>
        <span class='icon-bar'></span>
        <span class='icon-bar'></span>
      </button> -->
    <!-- </div> -->

    <!-- <ul class='nav navbar-nav navbar-right collapse navbar-collapse'> -->
    <ul class='nav navbar-nav navbar-right '>
       <li>
          <%= link_to carts_path do  %>
           购物车 <i class="fa fa-shopping-cart"> </i> ( <%= current_cart.products.count %> )
          <% end %>
       </li>
      <% if !current_user %>
      <li>
        <a href="#" data-toggle="modal" data-target="#signup-modal">注册</a>
      </li>

      <li>
        <a href="#" class='fa fa-sign-in' data-toggle="modal" data-target="#login-modal">
          登入</a>

      </li>
    <% else %>

      <li >
        <a href='#' data-toggle='dropdown'>
          Hi!,
          <%= current_user.email %>
          <span class='caret'></span>
        </a>

        <ul class='dropdown-menu'>

<% if current_user.admin? %>
                    <li>
                      <%= link_to(" Admin", admin_products_path) %>
                    </li>
                    <% end%>
                    <li>
               <%= link_to("我的订单", account_orders_path ) %>
             </li>
          <li>
            <%= link_to(" 登出", destroy_user_session_path, class: 'fa fa-sign-out',method: :delete) %>
          </li>
        </ul>

      </li>
      <% end %>
    </ul>
  </div>
</div>

<!-- 登录弹窗-->
<div class="modal fade" id="login-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog" role="document">
    <div class="loginmodal-container">
      <h2>Log in</h2>
      <%= simple_form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %>
      <div class="form-inputs">
        <%= f.input :email, required: false, autofocus: true %>
        <%= f.input :password, required: false %>
        <%= f.input :remember_me, as: :boolean if devise_mapping.rememberable? %>
      </div>
      <div class="form-actions">
        <%= f.button :submit, "Log in" %>
      </div>
      <% end %>
    </div>
  </div>
</div>

<div class="modal fade" id="signup-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="loginmodal-container">
      <h2>Sign up</h2>
      <%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
      <%= f.error_notification %>
      <div class="form-inputs">
        <%= f.input :email, required: true, autofocus: true %>
        <%= f.input :password, required: true, hint: ("#{@minimum_password_length} characters minimum" if @minimum_password_length) %>
        <%= f.input :password_confirmation, required: true %>
      </div>
      <div class="form-actions">
        <%= f.button :submit, "Sign up" %>
      </div>
      <% end %>
    </div>
  </div>
</div>
